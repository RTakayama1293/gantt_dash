# CLAUDE.md - EEZO ガントチャートダッシュボード

## プロジェクト概要

- **目的**: EEZO 2026年度週次タスクの動的ガントチャートダッシュボードを作成
- **技術スタック**: Python + Dash (Plotly) + pandas
- **データ**: CSV形式の週次タスクデータ（240タスク、通年計画）

---

## データセット情報

### タスクデータ (data/raw/eezo_2026_weekly_tasks.csv)

| カラム名 | 型 | 説明 | 備考 |
|----------|-----|------|------|
| 四半期 | string | Q1〜Q4 | 会計年度ベース |
| 週番号 | string | W1〜W12 | 各四半期内の週番号 |
| 開始日 | date | タスク開始日 | YYYY/M/D形式 |
| 終了日 | date | タスク終了日 | YYYY/M/D形式 |
| 担当者 | string | 担当者名 | 松永、高山 |
| カテゴリ | string | タスク分類 | 5種類 |
| タスク | string | タスク内容 | 詳細説明 |
| 成果物/マイルストーン | string | 期待される成果物 | ★マーク付きは重要マイルストーン |

### カテゴリ一覧
- プラットフォーム実装（松永担当）
- UX動線（松永担当）
- 商品コンテンツ（高山担当）
- 集客販促（高山担当）
- データ活用（高山担当）

---

## 必須機能要件

### 1. ガントチャート本体
- Plotly/Dash でインタラクティブなガントチャート表示
- 横軸：時間（日/週/月で切替可能）
- 縦軸：タスク（担当者・カテゴリでグループ化可能）
- バーの色：カテゴリまたは担当者で色分け
- ホバー時にタスク詳細をツールチップ表示
- ★マイルストーンの強調表示

### 2. フィルタリング機能
- 四半期フィルター（Q1〜Q4、複数選択可）
- 担当者フィルター（松永、高山、全員）
- カテゴリフィルター（5種類、複数選択可）
- 日付範囲スライダー

### 3. 表示設定
- **期間粒度切替**: 日 / 週 / 月
- グループ化切替: 担当者別 / カテゴリ別 / なし
- ソート順: 開始日 / 担当者 / カテゴリ

### 4. ドラッグ&ドロップ（並び替え）
- タスクの表示順を手動で入れ替え可能
- 入れ替え結果を保持（セッション内）

### 5. Excel出力
- 現在の表示内容（フィルター適用後）をExcel形式でダウンロード
- ファイル名: `eezo_tasks_YYYYMMDD.xlsx`
- シート構成: タスク一覧 + サマリー統計

### 6. サマリー表示
- 総タスク数（フィルター後）
- 担当者別タスク数
- カテゴリ別タスク数
- 期間情報（開始〜終了）

---

## UI/UXガイドライン

### レイアウト
```
+----------------------------------------------------------+
|  EEZO 2026 タスクダッシュボード              [Excel出力] |
+----------------------------------------------------------+
| フィルター: [四半期▼] [担当者▼] [カテゴリ▼]              |
| 表示設定:   [粒度▼]  [グループ▼] [ソート▼]               |
| 日付範囲:   [===========●============]                   |
+----------------------------------------------------------+
|                                                          |
|                  ガントチャート                          |
|                 （メインエリア）                          |
|                                                          |
+----------------------------------------------------------+
| サマリー: 全120タスク | 松永: 48 | 高山: 72              |
+----------------------------------------------------------+
```

### デザイン原則
- Bootstrap または Dash Bootstrap Components でモダンなUI
- レスポンシブ対応
- 日本語フォント対応（Noto Sans JP推奨）
- カラーパレット: 北海道らしい青・緑系を基調

### カテゴリ色設定（推奨）
- プラットフォーム実装: #3498db（青）
- UX動線: #9b59b6（紫）
- 商品コンテンツ: #e74c3c（赤）
- 集客販促: #f39c12（オレンジ）
- データ活用: #2ecc71（緑）

---

## ディレクトリルール

- **data/raw/**: 元データ（編集禁止）
- **src/**: アプリケーションコード
  - `app.py`: メインアプリケーション
  - `components/`: UIコンポーネント
  - `utils/`: ユーティリティ関数
- **output/**: 出力ファイル（Excel等）
- アプリ起動コマンド: `python src/app.py`

---

## コーディング規約

- 型ヒント必須
- docstring必須（Google形式）
- インデント: スペース4つ
- 日本語コメント可
- f-string優先

---

## 禁止事項

- data/raw/ 配下のファイル編集
- グローバル変数の使用（Dash callback状態管理は例外）
- 外部APIへの依存（ローカル完結を優先）

---

## 起動方法

```bash
# 依存関係インストール（初回のみ）
pip install -r requirements.txt

# アプリ起動
python src/app.py

# ブラウザでアクセス
# http://127.0.0.1:8050
```

---

## 追加で望ましい機能（余裕があれば）

1. **進捗率管理**: 各タスクに進捗率（0-100%）を追加可能に
2. **依存関係表示**: タスク間の依存線を描画
3. **今日線**: 現在日付を縦線で表示
4. **ズーム機能**: 特定期間を拡大表示
5. **印刷用ビュー**: A3横向き印刷に最適化されたビュー
6. **ダークモード**: テーマ切替

---

## ドメイン知識（新日本海商事 EEZO事業）

### 組織背景
- 北海道食材専門商社
- フェリー事業（新日本海フェリー）の子会社
- 9名の小規模組織

### 主要担当者
- **松永（エディ）**: システム開発担当、業務委託
- **高山**: データ分析・マーケティング担当

### EEZO概要
- 北海道食材のECプラットフォーム
- 2026年はCS-Cart→Shopify移行が主要プロジェクト
- toB/toC両市場をターゲット

### 5カテゴリの意味
- **プラットフォーム実装**: Shopify移行・技術基盤
- **UX動線**: GA4/GTM計測・ユーザー行動分析
- **商品コンテンツ**: 商品選定・説明文・写真
- **集客販促**: 広告・SNS・メルマガ
- **データ活用**: 分析基盤・BI構築

---

*最終更新: 2025-12-30*
